# .azure-pipelines/templates/install-terraform.yml
parameters:
  terraformVersion: "1.6.6"

steps:
  - bash: |
      set -euo pipefail

      TF_VERSION="${{ parameters.terraformVersion }}"
      echo "Installing Terraform ${TF_VERSION}..."

      # Download + install
      curl -sSLo /tmp/terraform.zip "https://releases.hashicorp.com/terraform/${TF_VERSION}/terraform_${TF_VERSION}_linux_amd64.zip"
      sudo unzip -o /tmp/terraform.zip -d /usr/local/bin

      # Verify
      terraform version
    displayName: "Install Terraform ${{ parameters.terraformVersion }}"